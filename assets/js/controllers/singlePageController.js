var SinglePage=["$scope","$http",function(e,t){e.rating=0;e.postId=$("#postId").val();e.averageRating=0;e.flagged=false;e.featured=false;e.fiveTwo=false;e.fourTwo=false;e.threeTwo=false;e.twoTwo=false;e.oneTwo=false;e.impact=[];e.data={rating:"",postId:e.postId};e.helpContent=false;e.userImpact={id:e.postId,impact:$("#impact").val()};e.flag={id:e.postId,reason:""};e.flagInit=function(){var n=baseUrl+"post/checkFlag";var r=e.postId;t.post(n,r).success(function(t){if(t.success==true){e.errorMessage=t.data.msg;$("#errorModal").modal("show")}else if(t.success==false){$("#flagModal").modal("show")}})};e.rateClick=function(){$("#login").trigger("click")};e.getImpacts=function(){var n=baseUrl+"post/getImpacts";t.get(n).success(function(t){e.impacts=t.data.impacts})};e.getImpacts();e.getRatingForPost=function(){var n=baseUrl+"rating/getRating";var r=e.postId;t.post(n,r).success(function(t){if(t.success==true){e.averageRating=t.data;if(e.averageRating>=.01&&e.averageRating<=.15){e.oneTwo=true}else if(e.averageRating>.15&&e.averageRating<=.4){e.oneTwo=true;e.twoTwo=true}else if(e.averageRating>.4&&e.averageRating<=.65){e.oneTwo=true;e.twoTwo=true;e.threeTwo=true}else if(e.averageRating>.65&&e.averageRating<=.9){e.oneTwo=true;e.twoTwo=true;e.threeTwo=true;e.fourTwo=true}else if(e.averageRating>.9){e.oneTwo=true;e.twoTwo=true;e.threeTwo=true;e.fourTwo=true;e.fiveTwo=true}}})};e.getRatingForPost();e.fiveTwoHover=function(){e.fiveTwo=true;e.oneTwo=true;e.twoTwo=true;e.threeTwo=true;e.fourTwo=true;e.rating=3};e.fourTwoHover=function(){e.fiveTwo=false;e.fourTwo=true;e.threeTwo=true;e.twoTwo=true;e.oneTwo=true;e.rating=1.5};e.threeTwoHover=function(){e.fiveTwo=false;e.fourTwo=false;e.threeTwo=true;e.twoTwo=true;e.oneTwo=true;e.rating=.5};e.twoTwoHover=function(){e.fiveTwo=false;e.fourTwo=false;e.threeTwo=false;e.twoTwo=true;e.oneTwo=true;e.rating=-1};e.oneTwoHover=function(){e.fiveTwo=false;e.fourTwo=false;e.threeTwo=false;e.twoTwo=false;e.oneTwo=true;e.rating=-3};e.hoverOut=function(){e.fiveTwo=false;e.fourTwo=false;e.threeTwo=false;e.twoTwo=false;e.oneTwo=false;e.getRatingForPost();e.rating=0};e.ratingSave=function(){var n=baseUrl+"rating/saveRating";e.data.rating=e.rating;var r=JSON.stringify(e.data);t.post(n,r).success(function(t){if(t.success==true){$("#impactModal").modal("show");e.getRatingForPost()}else if(t.success==false){$("#errorModal").modal("show");e.errorMessage=t.error.msg}})};e.saveImpact=function(){var n=baseUrl+"rating/saveImpact";var r=JSON.stringify(e.userImpact);t.post(n,r).success(function(e){$("#impactModal").modal("hide")})};e.isFeatured=function(){var n=baseUrl+"post/isFeatured";var r=e.postId;t.post(n,r).success(function(t){if(t.success==true){e.featured=true}})};e.isFeatured();e.flagContent=function(){var n=baseUrl+"post/flagContent";var r=e.flag;t.post(n,r).success(function(t){if(t.success==true){e.message=t.data.msg;e.flagged=true;$("#flagModal").modal("hide")}})};e.makeFeatured=function(){var n=baseUrl+"admin/featured/makeFeatured?id="+e.postId;t.get(n).success(function(t){if(t.success==true){e.featured=true}})};e.shareGPlus=function(){var n="https://plus.google.com/share?url="+document.URL;var r=baseUrl+"rating/share";var i=e.postId;t.post(r,i).success(function(e){});window.open(n,"Share on Google Plus","width=650,height=400")};e.shareFacebook=function(){var n="https://facebook.com/sharer/sharer.php?u="+document.URL;var r=baseUrl+"rating/share";var i=e.postId;t.post(r,i).success(function(e){});window.open(n,"Share on Facebook","width=650,height=400")};e.shareTwitter=function(){var n="http://twitter.com/share?url="+document.URL;var r=baseUrl+"rating/share";var i=e.postId;t.post(r,i).success(function(e){});window.open(n,"Share on Twitter","width=650,height=400")};e.helpNoteContentToggle=function(){if(e.helpContent==false){$(".help-note-content").slideDown("fast");e.helpContent=true}else{$(".help-note-content").slideUp("fast");e.helpContent=false}}}]