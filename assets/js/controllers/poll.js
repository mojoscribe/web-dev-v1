var pollCtrl=["$scope","$http",function(e,t){t.defaults.headers.common["XSRF_TOKEN"]=$("#csrf").val();e.poll="";e.selectedOption=1;e.isAnswered=false;e.results=[];var n=function(){return{pollid:null,option:null}};e.getPolls=function(){var n=baseUrl+"poll/json/getLatest";t.get(n).success(function(t){if(t.success){if(t.data.isAnswered){e.isAnswered=true;e.results=t.data.results;e.poll=t.data.poll}else{e.poll=t.data}}})};e.submitPoll=function(){var r=baseUrl+"poll/json/submit";var i=new n;i.pollid=e.poll.id;i.option=e.selectedOption;t.post(r,i).success(function(t){if(t.success){e.isAnswered=true;e.results=t.data.results}else{if(2005==t.error.code){$("#login").trigger("click")}}})};e.getPolls()}]