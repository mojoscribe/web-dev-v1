var PollPageCtrl=["$scope","$http",function(e,t){t.defaults.headers.common["XSRF_TOKEN"]=$("#csrf").val();e.polls=[];e.session=$("#session").val();e.poll="";e.selectedOption=1;e.isAnswered=false;e.results=[];e.pollId="";var n=function(){return{pollid:null,option:null}};e.getPolls=function(){var n=baseUrl+"poll/getPolls";var r="";t.post(n,r).success(function(t){if(t.success==true){e.polls=t.data;if(e.session==1){angular.forEach(e.polls,function(t){if(t.isAnswered==true){e.displayResults=true}else{e.displayResults=false}})}}})};e.pollOption=function(t){e.selectedOption=t.selectedOption};e.submitPoll=function(r){if(null==e.selectedOption){return false}e.pollId=r.poll.id;var i=baseUrl+"poll/json/submit";var s=new n;s.pollid=e.pollId;s.option=e.selectedOption;t.post(i,s).success(function(t){if(t.success){e.isAnswered=true;e.getPolls()}else{if(2005==t.error.code){$("#login").trigger("click")}}})};e.getPolls()}]