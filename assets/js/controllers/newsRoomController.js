var newsRoomCtrl=["$scope","$http","$timeout",function(e,t,n){t.defaults.headers.common["XSRF_TOKEN"]=$("#csrf").val();e.posts=[];e.myPosts=true;e.ratedPosts=false;e.showsubscriptions=false;e.empty=false;e.userId=$("#userId").val();e.subscriptions=[];e.contentHide=false;e.subscriptionsHide=false;e.files=[];e.followed=false;e.getRecentPosts=function(n){e.myPosts=true;e.ratedPosts=false;e.showsubscriptions=false;e.empty=false;e.contentHide=false;$(".news-room-ratedVideos").removeClass("button-active");$(".news-room-subscriptions").removeClass("button-active");$(".news-room-myVideos").addClass("button-active");var r=baseUrl+"newsRoom/getRecentPosts?howMany=10&userId="+e.userId;t.get(r).success(function(t){e.posts=[];e.posts=t.data;if(null==e.posts){e.empty=true}if(false==e.empty){e.showImage=false;e.showVideo=false;for(var n=0;n<e.posts.length;n++){if(e.posts[n].postType=="Image"){e.showImage=true;e.posts[n]["showImage"]=e.showImage;e.showVideo=false}else{e.showVideo=true;e.showImage=false;e.posts[n]["showVideo"]=e.showVideo}}}})};e.getRecentFiles=function(){var n=baseUrl+"newsRoom/getRecentFiles";var r=e.userId;t.post(n,r).success(function(t){e.files=t.data})};e.getRecentFiles();e.getRatedPosts=function(){e.myPosts=false;e.ratedPosts=true;e.showsubscriptions=false;e.empty=false;e.contentHide=false;$(".news-room-myVideos").removeClass("button-active");$(".news-room-subscriptions").removeClass("button-active");$(".news-room-ratedVideos").addClass("button-active");var n=baseUrl+"newsRoom/getRatedPosts?howMany=10&userId="+e.userId;t.get(n).success(function(t){if(t==null||typeof t.data.msg!="undefined"){e.empty=true;e.posts=[]}else{e.posts=[];e.posts=t.data;e.showImage=false;e.showVideo=false;for(var n=0;n<e.posts.length;n++){if(e.posts[n].postType=="Image"){e.showImage=true;e.posts[n]["showImage"]=e.showImage;e.showVideo=false}else{e.showVideo=true;e.showImage=false;e.posts[n]["showVideo"]=e.showVideo}}}})};e.getSubscriptions=function(){e.myPosts=false;e.ratedPosts=false;e.showsubscriptions=true;e.empty=false;e.contentHide=true;e.subscriptionsHide=false;$(".news-room-myVideos").removeClass("button-active");$(".news-room-ratedVideos").removeClass("button-active");$(".news-room-subscriptions").addClass("button-active");var n=baseUrl+"newsRoom/getSubscriptions?howMany=4&userId="+e.userId;t.get(n).success(function(t){if(typeof t.data.msg!="undefined"){e.empty=true;e.posts=[];e.subscriptions=[]}else{e.posts=[];e.subscriptions=[];e.subscriptions=t.data}})};e.current=[];e.currentIndex=0;for(var r=0;r<e.posts.length;r++){e.current[r]=false}e.init=function(){e.currentIndex=0;e.current[0]=true;e.loop()};e.nextLoop=function(){if(e.posts!=null){for(var t=0;t<e.posts.length;t++){e.current[t]=false}e.currentIndex++;if(e.currentIndex==e.posts.length){e.currentIndex=0}e.current[e.currentIndex]=true;e.loop()}};e.loop=function(){n(function(){e.nextLoop()},5e3)};e.followUser=function(){var n=e.userId;var r=baseUrl+"follow";t.post(r,n).success(function(t){if(t.success==true){if(t.data.code=="9501"){e.followed=true}else if(t.data.code=="9502"){e.followed=false}}})};e.getIsFollow=function(){var n=baseUrl+"follow/isFollow";var r=e.userId;t.post(n,r).success(function(t){if(t.success==true){if(t.data.code=="9503"){e.followed=true}else if(t.data.code=="9504"){e.followed=false}}})};e.getIsFollow();e.init();e.getRecentPosts(e.userId)}]